##### sentinel实现服务熔断、限流以及降级

限流：要实现限流最重要的就是限流方法
  计数器算法：比较简单的限流算法实现，在指定周期累加访问次数，当访问次数达到设定的阈值时，触发限流策略，当进入下一个时间周期是进行访问次数的清零。
     这种算法会有临界值的问题，比如上一个时间段的最后几秒与下一个时间段的开始几秒，数据流很大的话会超过上限。
  为了解决计数器算法带来的临界问题，引入了滑动窗口算法。简单来说，原理就是在固定窗口中分割出多个小时间窗口，分别在每个小时间窗口中记录访问次数，
     然后根据时间将窗口往前滑动并删除过期的小时间窗口。Sentinel就是采用滑动窗口算法实现限流的。
  令牌桶限流算法:
     令牌桶是网络流量整形和速率限制中最常用的算法，对于每个请求都需要从令牌桶中获取一个令牌，没有令牌，则需要触发限流策略。由于令牌桶由固定大小，当请求速度
     小于生成速度时，令牌桶能被填满，所以令牌桶可以处理突发流量。
  漏桶限流算法:
     在漏桶算法内部维护一个容器，这些容器会以恒定的速度出水，无论上面的水流速度多快。

##### 分布式事务的问题

分布式事务顾名思义就是要在分布式系统中实现事务，它其实是由多个本地事务组合而成。
 
 2PC
   2PC（Two-phase commit protocol），中文叫二阶段提交。 二阶段提交是一种强一致性设计，
   2PC 引入一个事务协调者的角色来协调管理各参与者（也可称之为各本地资源）的提交和回滚，二阶段分别指的是准备（投票）和提交两个阶段。
   
   准备阶段协调者会给各参与者发送准备命令，你可以把准备命令理解成除了提交事务之外啥事都做完了。
   
   同步等待所有资源的响应之后就进入第二阶段即提交阶段（注意提交阶段不一定是提交事务，也可能是回滚事务）。
   
   假如在第一阶段所有参与者都返回准备成功，那么协调者则向所有参与者发送提交事务命令，然后等待所有事务都提交成功之后，返回事务执行成功。
   
 TCC 
   TCC 指的是Try - Confirm - Cancel。
   
   Try 指的是预留，即资源的预留和锁定，注意是预留。
   Confirm 指的是确认操作，这一步其实就是真正的执行了。
   Cancel 指的是撤销操作，可以理解为把预留阶段的动作撤销了。
   其实从思想上看和 2PC 差不多，都是先试探性的执行，如果都可以那就真正的执行，如果不行就回滚。
   
   比如说一个事务要执行A、B、C三个操作，那么先对三个操作执行预留动作。如果都预留成功了那么就执行确认操作，如果有一个预留失败那就都执行撤销动作。
 